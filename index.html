<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة المبيعات</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="login-card card">
                <div class="card__body">
                    <h1>تسجيل الدخول</h1>
                    <form id="loginForm">
                        <div class="form-group">
                            <label class="form-label">اسم المستخدم</label>
                            <input type="text" id="loginUsername" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">كلمة المرور</label>
                            <input type="password" id="loginPassword" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">دخول</button>
                    </form>
                    <div class="login-switch">
                        <p>ليس لديك حساب؟ <a href="#" id="showRegister">إنشاء حساب جديد</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="page">
        <div class="login-container">
            <div class="login-card card">
                <div class="card__body">
                    <h1>إنشاء حساب جديد</h1>
                    <form id="registerForm">
                        <div class="form-group">
                            <label class="form-label">الاسم الكامل</label>
                            <input type="text" id="registerName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">اسم المستخدم</label>
                            <input type="text" id="registerUsername" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">كلمة المرور</label>
                            <input type="password" id="registerPassword" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">نوع المستخدم</label>
                            <select id="registerRole" class="form-control" required>
                                <option value="">اختر نوع المستخدم</option>
                                <option value="rep">مندوب مبيعات</option>
                                <option value="driver">سائق</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">إنشاء الحساب</button>
                    </form>
                    <div class="login-switch">
                        <p>لديك حساب بالفعل؟ <a href="#" id="showLogin">تسجيل الدخول</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="page">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 id="headerTitle">نظام إدارة المبيعات</h1>
                <div class="header-actions">
                    <span id="userInfo" class="user-info"></span>
                    <button id="logoutBtn" class="btn btn--outline btn--sm">خروج</button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="app-nav">
            <div class="nav-content">
                <div class="nav-items" id="navItems">
                    <!-- Navigation items will be populated based on user role -->
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Dashboard -->
            <div id="dashboard" class="view active">
                <div class="dashboard-grid">
                    <div class="dashboard-stats" id="dashboardStats">
                        <!-- Stats cards will be populated dynamically -->
                    </div>
                    <div class="dashboard-content" id="dashboardContent">
                        <!-- Main dashboard content -->
                    </div>
                </div>
            </div>

            <!-- Products Management -->
            <div id="products" class="view">
                <div class="view-header">
                    <h2>إدارة المنتجات</h2>
                    <button id="addProductBtn" class="btn btn--primary">إضافة منتج</button>
                </div>
                <div class="products-grid" id="productsGrid">
                    <!-- Products will be populated dynamically -->
                </div>
            </div>

            <!-- Inventory Management -->
            <div id="inventory" class="view">
                <div class="view-header">
                    <h2>إدارة المخزون</h2>
                    <button id="scanBarcodeBtn" class="btn btn--primary">مسح الباركود</button>
                </div>
                <div class="inventory-content">
                    <div class="inventory-list" id="inventoryList">
                        <!-- Inventory items will be populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- Sales Management -->
            <div id="sales" class="view">
                <div class="view-header">
                    <h2>إدارة المبيعات</h2>
                    <button id="addSaleBtn" class="btn btn--primary">تسجيل عملية بيع</button>
                </div>
                <div class="sales-content">
                    <div class="sales-list" id="salesList">
                        <!-- Sales records will be populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- Customers Management -->
            <div id="customers" class="view">
                <div class="view-header">
                    <h2>إدارة العملاء</h2>
                    <button id="addCustomerBtn" class="btn btn--primary">إضافة عميل</button>
                </div>
                <div class="customers-list" id="customersList">
                    <!-- Customers will be populated dynamically -->
                </div>
            </div>

            <!-- Chat -->
            <div id="chat" class="view">
                <div class="chat-container">
                    <div class="chat-header">
                        <h2>الدردشة</h2>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <!-- Messages will be populated dynamically -->
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chatMessageInput" class="form-control" placeholder="اكتب رسالتك...">
                        <button id="sendMessageBtn" class="btn btn--primary">إرسال</button>
                    </div>
                </div>
            </div>

            <!-- Reports -->
            <div id="reports" class="view">
                <div class="view-header">
                    <h2>التقارير</h2>
                </div>
                <div class="reports-content" id="reportsContent">
                    <!-- Reports will be populated dynamically -->
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Product Modal -->
    <div id="productModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">إضافة منتج</h3>
                <button id="closeProductModal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="productForm">
                    <div class="form-group">
                        <label class="form-label">اسم المنتج</label>
                        <input type="text" id="productName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">الباركود</label>
                        <input type="text" id="productBarcode" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">سعر الجملة</label>
                        <input type="number" id="productWholesalePrice" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">سعر المفرق</label>
                        <input type="number" id="productRetailPrice" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">الكمية في المخزن</label>
                        <input type="number" id="productStock" class="form-control" required>
                    </div>
                    <div class="modal-actions">
                        <button type="button" id="cancelProductModal" class="btn btn--outline">إلغاء</button>
                        <button type="submit" class="btn btn--primary">حفظ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Barcode Scanner Modal -->
    <div id="scannerModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>مسح الباركود</h3>
                <button id="closeScannerModal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="qr-reader" style="width: 100%; height: 300px;"></div>
                <div id="scanResult" class="scan-result hidden">
                    <h4>تم العثور على المنتج:</h4>
                    <div id="scannedProduct"></div>
                    <div class="form-group">
                        <label class="form-label">الكمية</label>
                        <input type="number" id="scannedQuantity" class="form-control" value="1" min="1">
                    </div>
                    <div class="modal-actions">
                        <button id="cancelScan" class="btn btn--outline">إلغاء</button>
                        <button id="addScannedProduct" class="btn btn--primary">إضافة للمخزون</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sale Modal -->
    <div id="saleModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>تسجيل عملية بيع</h3>
                <button id="closeSaleModal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="saleForm">
                    <div class="form-group">
                        <label class="form-label">المنتج</label>
                        <select id="saleProduct" class="form-control" required>
                            <option value="">اختر المنتج</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">الكمية</label>
                        <input type="number" id="saleQuantity" class="form-control" min="1" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">نوع البيع</label>
                        <select id="salePriceType" class="form-control" required>
                            <option value="retail">مفرق</option>
                            <option value="wholesale">جملة</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">العميل</label>
                        <select id="saleCustomer" class="form-control" required>
                            <option value="">اختر العميل</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="button" id="cancelSaleModal" class="btn btn--outline">إلغاء</button>
                        <button type="submit" class="btn btn--primary">تسجيل البيع</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Customer Modal -->
    <div id="customerModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>إضافة عميل</h3>
                <button id="closeCustomerModal" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="customerForm">
                    <div class="form-group">
                        <label class="form-label">اسم العميل</label>
                        <input type="text" id="customerName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">رقم الهاتف</label>
                        <input type="tel" id="customerPhone" class="form-control" required>
                    </div>
                    <div class="modal-actions">
                        <button type="button" id="cancelCustomerModal" class="btn btn--outline">إلغاء</button>
                        <button type="submit" class="btn btn--primary">حفظ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="toast hidden">
        <div class="toast-content">
            <span id="toastMessage"></span>
            <button id="closeToast" class="toast-close">&times;</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>